
{% for indent in indents %}
<tr>
   <td><span class="badge bg-primary">{{ indent.indent_no }}</span></td>
   <td>{{ indent.indent_date|date:"d M"  }}</td>
   <td>{{ indent.department }}</td>
   <td>Armaan Alam</td>
   <td>{{ indent.items.count }} items</td>
   <td><span class="badge {% if indent.priority == 'High' %}bg-danger {% elif indent.priority == 'Medium' %}bg-primary {% elif indent.priority == 'Low' %}bg-success{% endif %}">{{indent.priority}}</span></td>
   <td>{{indent.required_date|date:"d M"}}</td>
   <td><span class="badge {% if indent.status == 'Pending' %}bg-warning {% elif indent.status == 'Approved' %}bg-success {% elif indent.status == 'Rejected' %}bg-danger {% elif indent.status == 'Close' %}bg-primary{% endif %}">{{indent.status}}</span></td>
   
   <td>
      <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#editIndentModal-{{indent.id}}">Edit</button>
      <button type="button" class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#viewIndentModal-{{indent.id}}">View</button>
      {% include "fabzen_app/Purchase/PurchaseIndent/edit_indent.html" %}
      {% include "fabzen_app/Purchase/PurchaseIndent/view_indent.html" %}
   </td>
</tr>
{% empty %}
<tr>
   <td colspan="9" class="text-center">No indents found.</td>
</tr>
{% endfor %}

{% if is_paginated %}
<tr>
  <td colspan="10">
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-end">

        {% if indents.has_previous %}
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page=1" 
              hx-target="#indent-table" 
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">First</a>
        </li>
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page={{ indents.previous_page_number }}" 
              hx-target="#indent-table" 
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">Previous</a>
        </li>
        {% else %}
        <li class="page-item disabled"><a class="page-link">First</a></li>
        <li class="page-item disabled"><a class="page-link">Previous</a></li>
        {% endif %}

        {% for i in paginator.page_range %}
        {% if indents.number == i %}
        <li class="page-item active"><a class="page-link" href="#">{{ i }}</a></li>
        {% elif i > indents.number|add:'-3' and i < indents.number|add:'3' %}
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page={{ i }}" 
              hx-target="#indent-table" 
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">{{ i }}</a>
        </li>
        {% endif %}
        {% endfor %}

        {% if indents.has_next %}
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page={{ indents.next_page_number }}" 
              hx-target="#indent-table" 
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">Next</a>
        </li>
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page={{ paginator.num_pages }}" 
              hx-target="#indent-table"
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">Last</a>
        </li>
        {% else %}
        <li class="page-item disabled"><a class="page-link">Next</a></li>
        <li class="page-item disabled"><a class="page-link">Last</a></li>
        {% endif %}

      </ul>
    </nav>
  </td>
</tr>
{% endif %}
