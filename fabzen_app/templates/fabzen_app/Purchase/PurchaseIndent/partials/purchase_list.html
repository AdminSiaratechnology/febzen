
{% for indent in indents %}
<tr>
   <td><span class="badge bg-primary">{{ indent.indent_no }}</span></td>
   <td>{{ indent.indent_date|date:"d M"  }}</td>
   <td>{{ indent.department }}</td>
   <td>Armaan Alam</td>
   <td>{{ indent.items.count }} items</td>
   <td><span class="badge {% if indent.priority == 'High' %}bg-danger {% elif indent.priority == 'Medium' %}bg-primary {% elif indent.priority == 'Low' %}bg-success{% endif %}">{{indent.priority}}</span></td>
   <td>{{indent.required_date|date:"d M"}}</td>
   <td><span class="badge {% if indent.status == 'Pending' %}bg-warning {% elif indent.status == 'Approved' %}bg-success {% elif indent.status == 'Rejected' %}bg-danger {% elif indent.status == 'Close' %}bg-primary{% endif %}">{{indent.status}}</span></td>
   {% comment %} <td>
      <div class="dropdown ms-auto">
         <div class="cursor-pointer text-dark font-24 dropdown-toggle dropdown-toggle-nocaret" data-bs-toggle="dropdown"><i class="bx bx-dots-horizontal-rounded text-option"></i>
         </div>
         <div class="dropdown-menu dropdown-menu-end">
            <a href="{% url "edit_indent" indent.id %}" ><i class="fadeIn animated bx bx-edit bx-sm"></i></a>
            <button type="button" class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#viewIndentModal-{{indent.id}}"><i class="fadeIn animated bx bx-show "></i></button>
            
            
         </div>
      </div>
      {% include "fabzen_app/Purchase/PurchaseIndent/view_indent.html" %}
   </td> {% endcomment %}
   <td>
      <div class="dropdown ms-auto">
         <!-- Dropdown trigger -->
         <div class="cursor-pointer text-dark fs-4 dropdown-toggle dropdown-toggle-nocaret" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bx bx-dots-horizontal-rounded text-option"></i>
         </div>

         <!-- Dropdown menu -->
         <ul class="dropdown-menu dropdown-menu-end shadow-sm">
            <li>
            <a class="dropdown-item d-flex align-items-center gap-2" href="{% url 'edit_indent' indent.id %}">
               <i class="bx bx-edit bx-sm text-primary"></i> Edit
            </a>
            </li>
            <li>
            <button type="button" class="dropdown-item d-flex align-items-center gap-2" data-bs-toggle="modal" data-bs-target="#viewIndentModal-{{indent.id}}">
               <i class="bx bx-show bx-sm text-primary"></i> View
            </button>
            </li>
            <li>
               <a class="dropdown-item d-flex align-items-center gap-2" href="#">
                  <i class="fadeIn animated bx bx-printer bx-sm text-primary"></i> Print
               </a>
            </li>
         </ul>
      </div>

      {% include "fabzen_app/Purchase/PurchaseIndent/view_indent.html" %}
   </td>

   
</tr>
{% empty %}
<tr>
   <td colspan="9" class="text-center">No indents found.</td>
</tr>
{% endfor %}

{% if is_paginated %}
<tr>
  <td colspan="10">
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-end">

        {% if indents.has_previous %}
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page=1" 
              hx-target="#indent-table" 
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">First</a>
        </li>
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page={{ indents.previous_page_number }}" 
              hx-target="#indent-table" 
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">Previous</a>
        </li>
        {% else %}
        <li class="page-item disabled"><a class="page-link">First</a></li>
        <li class="page-item disabled"><a class="page-link">Previous</a></li>
        {% endif %}

        {% for i in paginator.page_range %}
        {% if indents.number == i %}
        <li class="page-item active"><a class="page-link" href="#">{{ i }}</a></li>
        {% elif i > indents.number|add:'-3' and i < indents.number|add:'3' %}
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page={{ i }}" 
              hx-target="#indent-table" 
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">{{ i }}</a>
        </li>
        {% endif %}
        {% endfor %}

        {% if indents.has_next %}
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page={{ indents.next_page_number }}" 
              hx-target="#indent-table" 
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">Next</a>
        </li>
        <li class="page-item">
           <a class="page-link" 
              hx-get="{% url 'indent_list' %}?page={{ paginator.num_pages }}" 
              hx-target="#indent-table"
              hx-swap="innerHTML"
              hx-include="[name='search'], [name='type']">Last</a>
        </li>
        {% else %}
        <li class="page-item disabled"><a class="page-link">Next</a></li>
        <li class="page-item disabled"><a class="page-link">Last</a></li>
        {% endif %}

      </ul>
    </nav>
  </td>
</tr>
{% endif %}
