<div class="modal fade" id="exampleLargeModal-{{ fabric.id }}" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      
      <!-- Header -->
      <div class="modal-header bg-primary text-white d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center">
          <i class="bi bi-card-text fs-4 me-2"></i>
          <h5 class="modal-title fw-bold mb-0 text-white">
            {% if fabric %}Edit Fabric Quality{% else %}Add Fabric Quality{% endif %}
          </h5>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- ✅ Form starts here -->
      <form 
        action="{% url 'fabric_update' fabric.id %}" 
        method="POST"
        class="row g-3"
      >
        {% csrf_token %}

        <div class="modal-body">

          <!-- Row 1 -->
          <div class="row mb-2">
            <div class="col-md-6">
              <label for="inputQualityCode" class="form-label">Quality Code</label>
              <input type="text" class="form-control text-muted" id="inputQualityCode"
                     placeholder="Auto: Q-XXXX"
                     value="{{ fabric.code }}" disabled>
            </div>
            <div class="col-md-6">
              <label for="inputQualityName" class="form-label">Quality Name</label>
              <input type="text" class="form-control" id="inputQualityName" name="quality_name"
                     placeholder="e.g., 60x60 Voile" required
                     value="{{ fabric.quality_name }}">
            </div>
          </div>

          <!-- Row 2 -->
          <div class="row mb-2">
            <div class="col-md-4">
              <label for="inputConstruction" class="form-label">Construction</label>
              <input type="text" class="form-control" id="inputConstruction" name="construction"
                     placeholder="eg. 60x60" required value="{{ fabric.construction }}">
            </div>
            <div class="col-md-4">
              <label for="inputWidth" class="form-label">Width (inches)</label>
              <input type="text" class="form-control" id="inputWidth" name="width"
                     placeholder="58" required value="{{ fabric.width }}">
            </div>
            <div class="col-md-4">
              <label for="inputGSM" class="form-label">GSM</label>
              <input type="number" class="form-control" id="inputGSM" name="gsm"
                     placeholder="85" required value="{{ fabric.gsm }}">
            </div>
          </div>

          <!-- Row 3 -->
          <div class="row mb-2">
            <div class="col-md-6">
              <label for="inputCategory" class="form-label">Category</label>
              <select class="form-select" id="inputCategory" name="category" required>
                <option value="Poplin" {% if fabric.category == "Poplin" %}selected{% endif %}>Poplin</option>
                <option value="Voile" {% if fabric.category == "Voile" %}selected{% endif %}>Voile</option>
                <option value="Synthetic" {% if fabric.category == "Synthetic" %}selected{% endif %}>Synthetic</option>
                <option value="Cambric" {% if fabric.category == "Cambric" %}selected{% endif %}>Cambric</option>
                <option value="Knit" {% if fabric.category == "Knit" %}selected{% endif %}>Knit</option>
              </select>
            </div>
            <div class="col-md-6">
              <label for="inputRate" class="form-label">Rate per Meter</label>
              <input type="number" step="0.01" class="form-control" id="inputRate"
                     name="rate_per_meter" placeholder="58" required
                     value="{{ fabric.rate_per_meter }}">
            </div>
          </div>

          <!-- Row 4 -->
          <div class="row mb-2">
            <div class="col-md-12">
              <label for="inputDescription" class="form-label">Description</label>
              <textarea class="form-control" id="inputDescription" name="description"
                        placeholder="Additional specifications">{{ fabric.description }}</textarea>
            </div>
          </div>

        </div>

        <!-- Footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
      <!-- ✅ Form ends here -->

    </div>
  </div>
</div>
