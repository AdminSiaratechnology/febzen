{% extends "fabzen_app/Base/base.html" %}

{% block title %}Fabzen | Size{% endblock title %}

{% block main-content %}

<div class="page-content">
    {% include "fabzen_app/Base/master_header.html" %}
     <div class="row">
      <div class="col">
         <div class="card">
            <div class="card-body">
               {% include "fabzen_app/Masters/Party/common.html" %}
               <!-- Party Master Header -->
               <div class="d-flex justify-content-between align-items-center mb-2">
                  <div>
                     <h4 class="mb-0">Size Master</h4>
                     <p class="text-muted mb-0">
                        Manage garment sizes and measurements
                     </p>
                  </div>
                  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleVerticallycenteredModal">Add Size</button>
                  {% comment %} {% include "fabzen_app/Masters/fabrics/partials/fabric_form.html" %} {% endcomment %}
                  {% include "fabzen_app/Masters/sizes/size_form.html" %}
               </div>
               <hr>
               {% include "fabzen_app/Base/messages.html" %}
               <!-- Party Table -->
               <div class="card">
                  <div class="card-body" hx-get="{% url 'size_list' %}"  hx-trigger="load" hx-target="this" hx-swap="innerHTML" >
                     {% comment %} Table wrapper without id; tbody will carry swap target id {% endcomment %}
                     {% comment %} <table class="table table-hover align-middle">
                        <thead class="table-light">
                           <tr>
                              <th>Code</th>
                              <th>Quality Name</th>
                              <th>Construction</th>
                              <th>Width</th>
                              <th>GSM</th>
                              <th>Category</th>
                              <th>Rate/Mtr (â‚¹)</th>
                              <th>Action</th>
                           </tr>
                        </thead>
                        <tbody 
                          id="fabric-table"
                           hx-get="{% url 'size_list' %}" 
                           hx-trigger="load" 
                           hx-target="this" 
                           hx-swap="innerHTML" 
                           >
                        </tbody>
                     </table>
                     {% if is_paginated %}
                     <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-end">
                           {% if fabrics.has_previous %}
                           <li class="page-item">
                              <a class="page-link" 
                                 hx-get="{% url 'fabric_list' %}?page=1" 
                                 hx-target="#fabric-table" 
                                 hx-swap="innerHTML">First</a>
                           </li>
                           <li class="page-item">
                              <a class="page-link" 
                                 hx-get="{% url 'fabric_list' %}?page={{ fabrics.previous_page_number }}" 
                                 hx-target="#fabric-table" 
                                 hx-swap="innerHTML">Previous</a>
                           </li>
                           {% else %}
                           <li class="page-item disabled"><a class="page-link">First</a></li>
                           <li class="page-item disabled"><a class="page-link">Previous</a></li>
                           {% endif %}
                           {% for i in paginator.page_range %}
                           {% if fabrics.number == i %}
                           <li class="page-item active"><a class="page-link" href="#">{{ i }}</a></li>
                           {% elif i > fabrics.number|add:'-3' and i < fabrics.number|add:'3' %}
                           <li class="page-item">
                              <a class="page-link" 
                                 hx-get="{% url 'fabric_list' %}?page={{ i }}" 
                                 hx-target="#fabric-table" 
                                 hx-swap="innerHTML">{{ i }}</a>
                           </li>
                           {% endif %}
                           {% endfor %}
                           {% if fabrics.has_next %}
                           <li class="page-item">
                              <a class="page-link" 
                                 hx-get="{% url 'fabric_list' %}?page={{ fabrics.next_page_number }}" 
                                 hx-target="#fabric-table" 
                                 hx-swap="innerHTML">Next</a>
                           </li>
                           <li class="page-item">
                              <a class="page-link" 
                                 hx-get="{% url 'fabric_list' %}?page={{ paginator.num_pages }}" 
                                 hx-target="#fabric-table" 
                                 hx-swap="innerHTML">Last</a>
                           </li>
                           {% else %}
                           <li class="page-item disabled"><a class="page-link">Next</a></li>
                           <li class="page-item disabled"><a class="page-link">Last</a></li>
                           {% endif %}
                        </ul>
                     </nav>
                     {% endif %} {% endcomment %}
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>



{% endblock main-content %}